!function(){var e={763:function(){const e=(e,t,o)=>{const n=e.querySelector(`#${t.id}-error`);t.classList.remove(o.inputErrorClass),n.classList.remove(o.errorClass),n.textContent=""},t=e=>e.some((e=>!e.validity.valid)),o=(e,o,n)=>{console.log(t(e)),t(e)?(o.disabled=!0,o.classList.add(n.inactiveButtonClass)):(o.disabled=!1,o.classList.remove(n.inactiveButtonClass))};var n;n={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active"},document.querySelectorAll(n.formSelector).forEach((t=>{((t,n)=>{const r=Array.from(t.querySelectorAll(n.inputSelector)),a=t.querySelector(n.submitButtonSelector);o(r,a,n),r.forEach((s=>{s.addEventListener("input",(function(){((t,o,n)=>{o.validity.valid?e(t,o,n):((e,t,o,n)=>{const r=e.querySelector(`#${t.id}-error`);t.classList.add(n.inputErrorClass),r.textContent=o,r.classList.add(n.errorClass)})(t,o,o.validationMessage,n)})(t,s,n),o(r,a,n)}))})),t.addEventListener("reset",(()=>{((t,n)=>{const r=Array.from(t.querySelectorAll(n.inputSelector)),a=t.querySelector(n.submitButtonSelector);r.forEach((o=>{e(t,o,n)})),o(r,a,n)})(t,n),console.log("Form is reset")}))})(t,n)}))}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,o),a.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=o(763);const t=document.querySelector("#card-template"),n=document.querySelector(".cards__list");function r(e){console.log(e);const o=t.content.querySelector(".card").cloneNode(!0),n=o.querySelector(".card__title"),r=o.querySelector(".card__image"),a=o.querySelector(".card__like-btn"),s=o.querySelector(".card__delete-btn");return n.textContent=e.name,r.src=e.link,r.alt=e.name,a.addEventListener("click",(()=>{a.classList.toggle("card__like-btn_liked")})),s.addEventListener("click",(()=>{o.remove()})),r.addEventListener("click",(()=>{L(p),f.src=e.link,_.textContent=e.name,f.alt=e.name})),o}[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach((e=>{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prepend";const o=r(e);n[t](o)}(e)}));const a=document.querySelectorAll(".modal__close-btn"),s=document.querySelector(".profile__edit-btn"),c=document.querySelector(".profile__name"),l=document.querySelector(".profile__description"),i=document.querySelector("#edit-modal"),d=document.forms["profile-form"],u=(i.querySelector(".modal__close-btn"),i.querySelector("#profile-name-input")),m=i.querySelector("#profile-description-input"),p=document.querySelector("#preview-modal"),f=p.querySelector(".modal__image"),_=p.querySelector(".modal__caption"),v=(p.querySelector(".modal__close-btn_type_preview"),document.querySelector("#add-card-modal")),y=(v.querySelector(".modal__close-btn"),document.querySelector(".profile__add-btn")),S=document.forms["add-card-form"],b=v.querySelector("#add-card-name-input"),g=v.querySelector("#add-card-link-input"),q=v.querySelector(".modal__submit-btn");function h(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&E(e)}}function w(e){e.target.classList.contains("modal_opened")&&E(e.target)}function L(e){e.classList.add("modal_opened"),document.addEventListener("keydown",h),e.addEventListener("mousedown",w)}function E(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",h),e.removeEventListener("mousedown",w)}s.addEventListener("click",(()=>{u.value=c.textContent,m.value=l.textContent,resetValidation(d,e.settings),L(i)})),y.addEventListener("click",(()=>{resetValidation(S,e.settings),L(v)})),a.forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>E(t)))})),d.addEventListener("submit",(function(e){e.preventDefault(),c.textContent=u.value,l.textContent=m.value,E(i)})),S.addEventListener("submit",(function(e){e.preventDefault();const t=r({name:b.value,link:g.value});n.prepend(t),E(v),S.reset(),q.disabled=!0,q.classList.add("modal__submit-btn_inactive")})),(0,e.enableValidation)(e.settings)}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWdCbUIsUUFDaEJoQixFQUFtQmxGLFVBQVcsRUFDOUJrRixFQUFtQmhHLFVBQVVlLElBQUksNkJBaUJuQyxLQXNCQWtHLEVBQUFBLEVBQUFBLGtCQUFpQlAsRUFBQUEsUyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnRuXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idG5faW5hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZVwiXG59XG5cbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbCwgZXJyb3JNc2csIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gIGlucHV0RWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IGVycm9yTXNnO1xuICBlcnJvck1zZ0VsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yTXNnRWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuZXJyb3JDbGFzcyk7XG4gIGVycm9yTXNnRWwudGV4dENvbnRlbnQgPSBcIlwiO1xufTtcblxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgIHNob3dJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsKSA9PiB7XG4gICAgcmV0dXJuICFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWwsIGNvbmZpZykgPT4ge1xuICBjb25zb2xlLmxvZyhoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSk7XG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgIGJ1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBidXR0b25FbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfSBlbHNlIHtcbiAgICBidXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGJ1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG59O1xuXG5jb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25FbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gIH0pO1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWwsIGNvbmZpZyk7XG59O1xuXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWwsIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG4gIGNvbnN0IGJ1dHRvbkVsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKTtcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWwsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGZvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xuICAgIHJlc2V0VmFsaWRhdGlvbihmb3JtRWwsIGNvbmZpZyk7XG4gICAgY29uc29sZS5sb2coXCJGb3JtIGlzIHJlc2V0XCIpO1xuICB9KTtcbn07XG5cblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWwpID0+IHtcbiAgICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbCwgY29uZmlnKTtcbiAgICB9KTtcbiAgfTtcblxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGU7IH07XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCB7IGVuYWJsZVZhbGlkYXRpb24sIHNldHRpbmdzIH0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuXG4vL0NhcmRzIEpTXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlZhbCBUaG9yZW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzEtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiXG4gICAgfSxcbiAge1xuICAgIG5hbWU6IFwiUmVzdGF1cmFudCB0ZXJyYWNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzItcGhvdG8tYnktY2VpbGluZS1mcm9tLXBleGVscy5qcGdcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBbiBvdXRkb29yIGNhZmVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZ1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0IGFuZCB0aHJvdWdoIHRoZSB0cmVlc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTW91bnRhaW4gaG91c2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNi1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCJcbiAgfSxcbl07XG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIilcblxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoZGF0YSkge1xuICBjb25zb2xlLmxvZyhkYXRhKVxuXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpLmNsb25lTm9kZSh0cnVlKTtcbiAgY29uc3QgY2FyZE5hbWVFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gIGNvbnN0IGNhcmRJbWFnZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgY29uc3QgY2FyZExpa2VCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xuICBjb25zdCBjYXJkRGVsZXRlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xuXG4gIGNhcmROYW1lRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gIGNhcmRJbWFnZUVsLnNyYyA9IGRhdGEubGluaztcbiAgY2FyZEltYWdlRWwuYWx0ID0gZGF0YS5uYW1lO1xuXG4gIGNhcmRMaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZExpa2VCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnRuX2xpa2VkXCIpO1xuICB9KTtcblxuICBjYXJkRGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH0pO1xuXG4gIGNhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgb3Blbk1vZGFsKHByZXZpZXdNb2RhbCk7XG4gICAgcHJldmlld01vZGFsSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld01vZGFsQ2FwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHByZXZpZXdNb2RhbEltYWdlRWwuYWx0ID0gZGF0YS5uYW1lO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5mdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0sIG1ldGhvZCA9IFwicHJlcGVuZFwiKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XG4gIGNhcmRzTGlzdFsgbWV0aG9kIF0oY2FyZEVsZW1lbnQpO1xufVxuaW5pdGlhbENhcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgcmVuZGVyQ2FyZChpdGVtKTtcbn0pO1xuXG4vLyBNb2RhbCBKU1xuLy9Vbml2ZXJzYWwgZWxlbWVudHNcbmNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbF9fY2xvc2UtYnRuJylcblxuXG4vLyBQcm9maWxlIGVsZW1lbnRzXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5cbi8vIEZvcm0gRWxlbWVudHNcbmNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1tb2RhbFwiKTtcbmNvbnN0IGVkaXRGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1mb3JtXCJdO1xuY29uc3QgZWRpdE1vZGFsQ2xvc2VCdG4gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgZWRpdE1vZGFsTmFtZUlucHV0ID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xuY29uc3QgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dCA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIik7XG5cbi8vIFByZXZpZXcgRWxlbWVudHNcbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbEltYWdlRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDYXB0aW9uRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbENsb3NlQnRuID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0bl90eXBlX3ByZXZpZXdcIik7XG5cbi8vIENhcmQtcmVsYXRlZCBFbGVtZW50c1xuY29uc3QgY2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmNvbnN0IGNhcmRNb2RhbENsb3NlQnRuID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IGNhcmRNb2RhbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcbmNvbnN0IGNhcmRGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmQtZm9ybVwiXTtcbmNvbnN0IGNhcmROYW1lSW5wdXQgPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1uYW1lLWlucHV0XCIpO1xuY29uc3QgY2FyZExpbmtJbnB1dCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWxpbmstaW5wdXRcIik7XG5jb25zdCBjYXJkTW9kYWxTdWJtaXRCdG4gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKVxuXG4vLyBGdW5jdGlvbnNcblxuZnVuY3Rpb24gaGFuZGxlRXNjS2V5KGV2dCkge1xuICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICBjb25zdCBvcGVuTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfb3BlbmVkJyk7XG4gICAgaWYgKG9wZW5Nb2RhbCkge1xuICAgICAgY2xvc2VNb2RhbChvcGVuTW9kYWwpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVPdmVybGF5Q2xpY2soZXZ0KSB7XG4gIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWxfb3BlbmVkJykpIHtcbiAgICBjbG9zZU1vZGFsKGV2dC50YXJnZXQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlRXNjS2V5KTtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlT3ZlcmxheUNsaWNrKTtcbn07XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUVzY0tleSk7XG4gIG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZU92ZXJsYXlDbGljayk7XG59O1xuXG5mdW5jdGlvbiByZXNldENhcmRGb3JtKCkge1xuICBjYXJkRm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgY2FyZE1vZGFsU3VibWl0QnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgY2FyZE1vZGFsU3VibWl0QnRuLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fc3VibWl0LWJ0bl9pbmFjdGl2ZVwiKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRWRpdEZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dC52YWx1ZTtcbiAgY2xvc2VNb2RhbChlZGl0TW9kYWwpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7bmFtZTogY2FyZE5hbWVJbnB1dC52YWx1ZSwgbGluazogY2FyZExpbmtJbnB1dC52YWx1ZX1cbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpbnB1dFZhbHVlcyk7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgY2xvc2VNb2RhbChjYXJkTW9kYWwpO1xuICByZXNldENhcmRGb3JtKGNhcmRNb2RhbCk7XG59XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICByZXNldFZhbGlkYXRpb24oZWRpdEZvcm1FbGVtZW50LCBzZXR0aW5ncylcbiAgb3Blbk1vZGFsKGVkaXRNb2RhbCk7XG59KTtcblxuY2FyZE1vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHJlc2V0VmFsaWRhdGlvbihjYXJkRm9ybUVsZW1lbnQsIHNldHRpbmdzKVxuICBvcGVuTW9kYWwoY2FyZE1vZGFsKTtcbn0pO1xuXG5jbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoJy5tb2RhbCcpO1xuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjbG9zZU1vZGFsKHBvcHVwKSk7XG59KTtcblxuZWRpdEZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlRWRpdEZvcm1TdWJtaXQpO1xuY2FyZEZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIl0sIm5hbWVzIjpbImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsIiwiaW5wdXRFbCIsImNvbmZpZyIsImVycm9yTXNnRWwiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJoYXNJbnZhbGlkSW5wdXQiLCJpbnB1dExpc3QiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiYnV0dG9uRWwiLCJjb25zb2xlIiwibG9nIiwiZGlzYWJsZWQiLCJhZGQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInNldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNc2ciLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInJlc2V0VmFsaWRhdGlvbiIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNhcmRUZW1wbGF0ZSIsImNhcmRzTGlzdCIsImdldENhcmRFbGVtZW50IiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmROYW1lRWwiLCJjYXJkSW1hZ2VFbCIsImNhcmRMaWtlQnRuIiwiY2FyZERlbGV0ZUJ0biIsIm5hbWUiLCJzcmMiLCJsaW5rIiwiYWx0IiwidG9nZ2xlIiwib3Blbk1vZGFsIiwicHJldmlld01vZGFsIiwicHJldmlld01vZGFsSW1hZ2VFbCIsInByZXZpZXdNb2RhbENhcHRpb25FbCIsIml0ZW0iLCJtZXRob2QiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJyZW5kZXJDYXJkIiwiY2xvc2VCdXR0b25zIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsImVkaXRNb2RhbCIsImVkaXRGb3JtRWxlbWVudCIsImZvcm1zIiwiZWRpdE1vZGFsTmFtZUlucHV0IiwiZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dCIsImNhcmRNb2RhbCIsImNhcmRNb2RhbEJ0biIsImNhcmRGb3JtRWxlbWVudCIsImNhcmROYW1lSW5wdXQiLCJjYXJkTGlua0lucHV0IiwiY2FyZE1vZGFsU3VibWl0QnRuIiwiaGFuZGxlRXNjS2V5IiwiZXZ0IiwiY2xvc2VNb2RhbCIsImhhbmRsZU92ZXJsYXlDbGljayIsInRhcmdldCIsImNvbnRhaW5zIiwibW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidmFsdWUiLCJzZXR0aW5ncyIsImJ1dHRvbiIsInBvcHVwIiwiY2xvc2VzdCIsInByZXZlbnREZWZhdWx0IiwicHJlcGVuZCIsInJlc2V0IiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=